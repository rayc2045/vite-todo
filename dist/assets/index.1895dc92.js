const t=document.querySelector("#task-input"),e=document.querySelector("#add-task"),n=document.querySelector("#filters"),c=[...n.childNodes].filter((t=>"LI"===t.nodeName)),o=document.querySelector("#tasks"),l=document.querySelector("#unfinished-task-num"),i=document.querySelector("#clear-finished-tasks");let r=[{task:"把冰箱發霉的檸檬拿去丟",completed:!1},{task:"打電話叫媽媽匯款給我",completed:!0},{task:"整理電腦資料夾",completed:!1},{task:"繳電費水費瓦斯費",completed:!0},{task:"刪訊息",completed:!1},{task:"約 Vicky 禮拜三泡溫泉",completed:!1},{task:"約 Ada 禮拜四吃晚餐",completed:!1}];function s(){let t=m();("待完成"===t&&!p()||"已完成"===t&&p()===r.length)&&(t="全部"),a(t)}function a(t="全部"){f(t),d(t),k()}function d(e="全部"){let n="";for(const t in r)"全部"===e&&(n+=u(t)),"待完成"===e&&(r[t].completed||(n+=u(t))),"已完成"===e&&r[t].completed&&(n+=u(t));o.innerHTML=n,t.focus()}function u(t){return`\n    <li id="${t}" class="flex items-center group">\n      <input id="check" class="ml-3" type="checkbox"${r[t].completed?" checked":""}>\n      <label for="check" class="ml-4 border-b-2 flex-grow cursor-text border-gray-100 focus:outline-none${r[t].completed?" text-gray-300 line-through":""}" style="padding: 18px 0;">\n        ${r[t].task}\n      </label>\n      <button id="delete" class="ml-2 p-3 text-2xl text-gray-400 lg:text-transparent lg:group-hover:text-gray-400 focus:outline-none transition">\n        ✕\n      </button>\n    </li>\n  `}function f(t="全部"){c.forEach((e=>{e.textContent===t?(e.classList.remove("filter-inactive"),e.classList.add("filter-active")):(e.classList.remove("filter-active"),e.classList.add("filter-inactive"))}))}function m(){return c.filter((t=>t.classList.contains("filter-active")))[0].textContent}function k(){l.textContent=p()}function p(){return r.filter((t=>!t.completed)).length}function g(){const e=t.value.trim();if(!e)return t.value="";r=[...r,{task:e,completed:!1}],t.value=""}d(),k(),t.onkeydown=t=>{if("Enter"===t.key){let t=m();"已完成"===t&&(t="全部"),g(),a(t)}},e.onclick=()=>{let t=m();"已完成"===t&&(t="全部"),g(),a(t)},n.onclick=t=>{if(t.target.classList.contains("filter-inactive")){a(t.target.textContent)}},o.onclick=t=>{"check"===t.target.id&&(!function(t){const e=t.target.closest("li").id;r[e].completed=!r[e].completed}(t),s()),"delete"===t.target.id&&(confirm("確定刪除？")&&function(t){const e=t.target.closest("li").id;r.splice(e,1)}(t),s())},i.onclick=()=>{confirm("確定移除完成的任務？")&&(r=r.filter((t=>!t.completed)),"已完成"===m()&&f(),d())};

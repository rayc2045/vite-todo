const t=document.querySelector("#task-input"),e=document.querySelector("#add-task"),o=document.querySelector("#filters"),n=[...o.childNodes].filter((t=>!t.nodeName.includes("#"))),c=document.querySelector("#tasks"),i=document.querySelector("#unfinished-task-num"),l=document.querySelector("#clear-finished-tasks");let r=(s="vite-todo",JSON.parse(localStorage.getItem(s))||[{task:"把冰箱發霉的檸檬拿去丟",completed:!1},{task:"打電話叫媽媽匯款給我",completed:!0},{task:"整理電腦資料夾",completed:!1},{task:"繳電費水費瓦斯費",completed:!0},{task:"刪訊息",completed:!1},{task:"約 Vicky 禮拜三泡溫泉",completed:!1},{task:"約 Ada 禮拜四吃晚餐",completed:!1}]);var s;function a(){let t=p();("待完成"===t&&!k()||"已完成"===t&&k()===r.length)&&(t="全部"),d(t)}function d(t="全部"){m(t),u(t),g()}function u(e="全部"){let o="";for(const t in r)"全部"===e&&(o+=f(t)),"待完成"===e&&(r[t].completed||(o+=f(t))),"已完成"===e&&r[t].completed&&(o+=f(t));c.innerHTML=o,t.focus()}function f(t){return`\n    <li id="${t}" class="flex items-center group">\n      <input id="check" class="ml-3" type="checkbox"${r[t].completed?" checked":""}>\n      <label for="check" class="ml-4 border-b-2 flex-grow cursor-text border-gray-100 focus:outline-none${r[t].completed?" text-gray-300 line-through":""}" style="padding: 18px 0;">\n        ${r[t].task}\n      </label>\n      <button id="delete" class="ml-2 p-3 text-2xl text-gray-400 lg:text-transparent lg:group-hover:text-gray-400 focus:outline-none transition duration-75">\n        ✕\n      </button>\n    </li>\n  `}function m(t="全部"){n.forEach((e=>{e.textContent===t?(e.classList.remove("filter-inactive"),e.classList.add("filter-active")):(e.classList.remove("filter-active"),e.classList.add("filter-inactive"))}))}function p(){return n.filter((t=>t.classList.contains("filter-active")))[0].textContent}function g(){i.textContent=k()}function k(){return r.filter((t=>!t.completed)).length}function v(){const e=t.value.trim();if(!e)return t.value="";r=[...r,{task:e,completed:!1}],t.value=""}function h(t,e){localStorage.setItem(t,JSON.stringify(e))}function y(t){localStorage.removeItem(t)}u(),g(),t.onkeydown=t=>{if("Enter"===t.key){let t=p();"已完成"===t&&(t="全部"),v(),d(t),h("vite-todo",r)}},e.onclick=()=>{let t=p();"已完成"===t&&(t="全部"),v(),d(t),h("vite-todo",r)},o.onclick=t=>{if(t.target.classList.contains("filter-inactive")){d(t.target.textContent)}},c.onclick=t=>{if("check"===t.target.id&&(!function(t){const e=t.target.closest("li").id;r[e].completed=!r[e].completed}(t),a(),h("vite-todo",r)),"delete"===t.target.id){if(confirm("確定刪除？")&&function(t){const e=t.target.closest("li").id;r.splice(e,1)}(t),a(),r.length)return h("vite-todo",r);y("vite-todo")}},l.onclick=()=>{if(confirm("確定移除完成的任務？")){if(r=r.filter((t=>!t.completed)),"已完成"===p()&&m(),u(),r.length)return h("vite-todo",r);y("vite-todo")}};
